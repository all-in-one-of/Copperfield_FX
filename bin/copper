#!/usr/bin/env python

import sys, os
import logging

from PyQt5 import QtWidgets, QtGui, QtCore

logging.basicConfig(level=logging.DEBUG)

os.environ['PYOPENCL_COMPILER_OUTPUT'] = "1"

if __name__ == '__main__':
    logging.basicConfig(level=logging.DEBUG)
    app = QtWidgets.QApplication(sys.argv)
    QtGui.QFontDatabase.addApplicationFont('media/fonts')
    app.setStyle(QtWidgets.QStyleFactory.create('Plastique'))
    app.setWindowIcon(QtGui.QIcon('gui/icons/copper_icon.png'))

    # Create and display the splash screen
    splash_pix = QtGui.QPixmap('gui/media/splash_screen.png')
    splash = QtWidgets.QSplashScreen(splash_pix, QtCore.Qt.WindowStaysOnTopHint)
    splash.show()
    app.processEvents()

    # Create main window
    from gui.main_window import MainWindow

    window = MainWindow()
    window.load_style()

    # Move main window to desktop center
    desktop = QtGui.QApplication.desktop()
    screenWidth = desktop.width()
    screenHeight = desktop.height()
    x = (screenWidth - window.width()) / 2
    y = (screenHeight - window.height()) / 2
    window.move(x, y)

    # Show main window
    window.show()
    splash.finish(window)
    window.raise_()
    window.activateWindow()

    window.open_project(make_test_project=True)

    sys.exit(app.exec_())